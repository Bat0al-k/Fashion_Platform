import{b as B,c as Z}from"./chunk-3G4SOJP5.js";import{e as y,m as H}from"./chunk-DR4VOI5K.js";import{a as U,b as N,c as f,d as O,e as T,g as L,h as A,i as F,m as j,o as q}from"./chunk-O6KHI3MG.js";import{a as I}from"./chunk-AZEPATSB.js";import"./chunk-5IWPKPXY.js";import{$a as g,B as u,Ba as P,Da as M,E as x,F as b,Ta as k,Va as E,W as r,da as p,fa as a,gb as V,ha as D,ja as n,ka as o,la as d,nb as C,ob as R,qa as v,ra as w,rb as c,ua as s,x as W,y as _}from"./chunk-CONT6OMZ.js";var ee=e=>({"cursor-not-allowed":e});function te(e,m){e&1&&(n(0,"span"),s(1,"Email is required."),o())}function ie(e,m){e&1&&(n(0,"span"),s(1,"Invalid email format."),o())}function ne(e,m){if(e&1&&(n(0,"div",30),p(1,te,2,0,"span",31)(2,ie,2,0,"span",31),o()),e&2){let i=w();r(),a("ngIf",i.email==null||i.email.errors==null?null:i.email.errors.required),r(),a("ngIf",i.email==null||i.email.errors==null?null:i.email.errors.email)}}function oe(e,m){e&1&&(n(0,"div",30),s(1," Password is required. "),o())}function re(e,m){e&1&&d(0,"span",32)}var G=(()=>{class e{constructor(){this.fb=u(j),this.authService=u(y),this.router=u(C),this.toastr=u(H),this.alert=u(I),this.loading=!1,this.form=this.fb.group({email:["",[f.required,f.email]],password:["",[f.required]],remember:[!1]})}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0;let i=this.email?.value,l=this.password?.value,t=!!this.form.value.remember;if(!i||!l){this.alert.show("Invalid form data","warning"),this.loading=!1;return}this.authService.login({email:i,password:l}).subscribe({next:h=>{this.loading=!1,this.authService.saveToken(h.token,t),this.alert.show("Logged in successfully!","success"),this.router.navigate(["/"])},error:h=>{this.loading=!1,this.alert.show("Login failed. Please check your credentials.","error")}})}loginWithGoogle(){this.authService.loginWithGoogle().then(i=>{i.subscribe({next:l=>{localStorage.setItem("token",l.token),this.alert.show("Logged in with Google","success"),this.router.navigate(["/products"])},error:()=>{this.alert.show("Google login failed","error")}})}).catch(i=>{i.code==="auth/popup-closed-by-user"?this.alert.show("Login was canceled","warning"):(console.error(i),this.alert.show("Google login failed","error"))})}get email(){return this.form.get("email")}get password(){return this.form.get("password")}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-login"]],standalone:!0,features:[P],decls:42,vars:8,consts:[[1,"login-page-wrapper","position-relative","vh-100"],[1,"bg-image"],[1,"overlay"],[1,"container","h-100","d-flex","align-items-center","justify-content-center"],[1,"row","w-100","text-white"],[1,"col-md-6","d-flex","flex-column","justify-content-center","ps-md-5","mb-4","mb-md-0"],[1,"fas","fa-glasses","fa-3x","mb-3"],[1,"display-4","fw-bold"],[1,"lead"],[1,"col-md-6","d-flex","justify-content-center","animate__animated","animate__fadeInUp","animate__faster"],[1,"card","p-4","login-card","rounded-4","shadow"],[1,"text-center","fw-bold","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"form-check","mb-3"],["type","checkbox","formControlName","remember","id","remember",1,"form-check-input"],["for","remember",1,"form-check-label"],[1,"mb-3","text-end"],["routerLink","/cart",1,"text-decoration-none","text-secondary"],[1,"d-grid","mb-2",3,"ngClass"],[1,"btn","btn-dark","rounded-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"d-grid","mb-2"],["type","button",1,"btn","btn-outline-danger","rounded-3",3,"click"],[1,"fab","fa-google","me-2"],[1,"text-center","mt-2"],["routerLink","/auth/register",1,"text-decoration-none","fw-semibold"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(l,t){l&1&&(n(0,"div",0),d(1,"div",1)(2,"div",2),n(3,"div",3)(4,"div",4)(5,"div",5),d(6,"i",6),n(7,"h1",7),s(8,"Welcome Back"),o(),n(9,"p",8),s(10,"Log in to your fashion account and continue shopping in style!"),o()(),n(11,"div",9)(12,"div",10)(13,"h3",11),s(14,"Login"),o(),n(15,"form",12),v("ngSubmit",function(){return t.submit()}),n(16,"div",13),d(17,"input",14),p(18,ne,3,2,"div",15),o(),n(19,"div",13),d(20,"input",16),p(21,oe,2,0,"div",15),o(),n(22,"div",17),d(23,"input",18),n(24,"label",19),s(25,"Remember me"),o()(),n(26,"div",20)(27,"a",21),s(28,"Forgot password?"),o()(),n(29,"div",22)(30,"button",23),p(31,re,1,0,"span",24),s(32," Login "),o()(),n(33,"div",25)(34,"button",26),v("click",function(){return t.loginWithGoogle()}),d(35,"i",27),s(36," Login with Google "),o()(),n(37,"div",28)(38,"span"),s(39,"Don't have an account?"),o(),n(40,"a",29),s(41,"Register"),o()()()()()()()()),l&2&&(r(15),a("formGroup",t.form),r(3),a("ngIf",(t.email==null?null:t.email.touched)&&(t.email==null?null:t.email.invalid)),r(3),a("ngIf",(t.password==null?null:t.password.touched)&&(t.password==null?null:t.password.invalid)),r(8),a("ngClass",M(6,ee,t.loading||t.form.invalid)),r(),a("disabled",t.loading),r(),a("ngIf",t.loading))},dependencies:[g,k,E,q,L,N,U,O,T,A,F,c,R],styles:[".login-page-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.bg-image[_ngcontent-%COMP%]{background:url(/assets/bg1.jpg) top/cover no-repeat;position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to right,#000000de,#000000de,#0003);z-index:2}.container[_ngcontent-%COMP%]{position:relative;z-index:3}.login-card[_ngcontent-%COMP%]{background-color:#fffd;max-width:400px;width:100%}.form-control[_ngcontent-%COMP%]{border-radius:.5rem;padding:.75rem;font-size:1rem;transition:border-color .3s,box-shadow .3s}.form-control[_ngcontent-%COMP%]:focus{border-color:#212529;box-shadow:0 0 0 .2rem #21252940}.btn-dark[_ngcontent-%COMP%]{padding:.75rem;font-weight:600;font-size:1rem;transition:background-color .3s}.btn-dark[_ngcontent-%COMP%]:disabled{opacity:.7}.text-danger[_ngcontent-%COMP%]{font-size:.875rem}@media (max-width: 768px){.login-card[_ngcontent-%COMP%]{padding:2rem 1rem;border-radius:.75rem}}"]})}}return e})();var ae=e=>({"cursor-not-allowed":e});function se(e,m){e&1&&(n(0,"span"),s(1,"Name is required."),o())}function le(e,m){if(e&1&&(n(0,"div",28),p(1,se,2,0,"span",29),o()),e&2){let i=w();r(),a("ngIf",i.name==null||i.name.errors==null?null:i.name.errors.required)}}function me(e,m){e&1&&(n(0,"span"),s(1,"Email is required."),o())}function de(e,m){e&1&&(n(0,"span"),s(1,"Invalid email format."),o())}function pe(e,m){if(e&1&&(n(0,"div",28),p(1,me,2,0,"span",29)(2,de,2,0,"span",29),o()),e&2){let i=w();r(),a("ngIf",i.email==null||i.email.errors==null?null:i.email.errors.required),r(),a("ngIf",i.email==null||i.email.errors==null?null:i.email.errors.email)}}function ue(e,m){e&1&&(n(0,"span"),s(1,"Password is required."),o())}function ce(e,m){e&1&&(n(0,"span"),s(1,"Minimum 6 characters."),o())}function fe(e,m){if(e&1&&(n(0,"div",28),p(1,ue,2,0,"span",29)(2,ce,2,0,"span",29),o()),e&2){let i=w();r(),a("ngIf",i.password==null||i.password.errors==null?null:i.password.errors.required),r(),a("ngIf",i.password==null||i.password.errors==null?null:i.password.errors.minlength)}}function ge(e,m){e&1&&(n(0,"span"),s(1,"Confirm password is required."),o())}function he(e,m){if(e&1&&(n(0,"div",28),p(1,ge,2,0,"span",29),o()),e&2){let i=w();r(),a("ngIf",i.confirmPassword==null||i.confirmPassword.errors==null?null:i.confirmPassword.errors.required)}}function ve(e,m){e&1&&(n(0,"div",28),s(1," Passwords do not match. "),o())}function we(e,m){e&1&&d(0,"span",30)}var z=(()=>{class e{constructor(){this.fb=u(j),this.authService=u(y),this.router=u(C),this.alert=u(I),this.loading=!1,this.showPassword=!1,this.showConfirmPassword=!1,this.passwordMatchValidator=i=>{let l=i.get("password")?.value,t=i.get("confirmPassword")?.value;return l===t?null:{passwordMismatch:!0}},this.form=this.fb.group({name:["",f.required],email:["",[f.required,f.email,f.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]],password:["",[f.required,f.minLength(6)]],confirmPassword:["",f.required]},{validators:this.passwordMatchValidator})}get name(){return this.form.get("name")}get email(){return this.form.get("email")}get password(){return this.form.get("password")}get confirmPassword(){return this.form.get("confirmPassword")}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.authService.register(this.form.value).subscribe({next:()=>{this.loading=!1,this.alert.show("Registered successfully! Please check your email.","success"),this.router.navigate(["/"])},error:i=>{this.loading=!1;let l=i.error?.message||"Registration failed. Please try again.";this.alert.show(l,"error")}})}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-register"]],standalone:!0,features:[P],decls:44,vars:25,consts:[[1,"register-page-wrapper","position-relative","vh-100"],[1,"bg-image"],[1,"overlay"],[1,"container","h-100","d-flex","align-items-center","justify-content-center"],[1,"row","w-100","text-white"],[1,"col-md-6","d-flex","flex-column","justify-content-center","ps-md-5","mb-4","mb-md-0"],[1,"fas","fa-glasses","fa-3x","mb-3"],[1,"display-4","fw-bold"],[1,"lead"],[1,"col-md-6","d-flex","justify-content-center","animate__animated","animate__fadeInUp","animate__faster"],[1,"card","p-4","register-card","rounded-4","shadow"],[1,"text-center","fw-bold","mb-3"],[3,"ngSubmit","formGroup"],[1,"mb-3","position-relative"],[1,"fas","fa-user","position-absolute","top-50","start-0","translate-middle-y","ms-3","text-muted"],["type","text","formControlName","name","placeholder","Full Name",1,"form-control","ps-5"],["class","text-danger small mt-1",4,"ngIf"],[1,"fas","fa-envelope","position-absolute","top-50","start-0","translate-middle-y","ms-3","text-muted"],["type","email","formControlName","email","placeholder","Email",1,"form-control","ps-5"],[1,"fas","fa-lock","position-absolute","top-50","start-0","translate-middle-y","ms-3","text-muted"],["formControlName","password","placeholder","Password",1,"form-control","ps-5",3,"type"],[1,"position-absolute","top-50","end-0","translate-middle-y","me-3",2,"cursor","pointer",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",1,"form-control","ps-5",3,"type"],[1,"d-grid","mb-2",3,"ngClass"],[1,"btn","btn-dark","rounded-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center","mt-2"],["routerLink","/auth/login",1,"text-decoration-none","fw-semibold","pointer-event"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(l,t){l&1&&(n(0,"div",0),d(1,"div",1)(2,"div",2),n(3,"div",3)(4,"div",4)(5,"div",5),d(6,"i",6),n(7,"h1",7),s(8,"FASHION"),o(),n(9,"p",8),s(10,"Welcome to the ultimate fashion platform. Register now to start your journey!"),o()(),n(11,"div",9)(12,"div",10)(13,"h3",11),s(14,"Register"),o(),n(15,"form",12),v("ngSubmit",function(){return t.submit()}),n(16,"div",13),d(17,"i",14)(18,"input",15),p(19,le,2,1,"div",16),o(),n(20,"div",13),d(21,"i",17)(22,"input",18),p(23,pe,3,2,"div",16),o(),n(24,"div",13),d(25,"i",19)(26,"input",20),n(27,"i",21),v("click",function(){return t.showPassword=!t.showPassword}),o(),p(28,fe,3,2,"div",16),o(),n(29,"div",13),d(30,"i",19)(31,"input",22),n(32,"i",21),v("click",function(){return t.showConfirmPassword=!t.showConfirmPassword}),o(),p(33,he,2,1,"div",16)(34,ve,2,0,"div",16),o(),n(35,"div",23)(36,"button",24),p(37,we,1,0,"span",25),s(38," Register "),o()(),n(39,"div",26)(40,"span"),s(41,"Already have an account?"),o(),n(42,"a",27),s(43,"Login"),o()()()()()()()()),l&2&&(r(15),a("formGroup",t.form),r(4),a("ngIf",(t.name==null?null:t.name.touched)&&(t.name==null?null:t.name.invalid)),r(4),a("ngIf",(t.email==null?null:t.email.touched)&&(t.email==null?null:t.email.invalid)),r(3),a("type",t.showPassword?"text":"password"),r(),D("fas",!0)("fa-eye",!t.showPassword)("fa-eye-slash",t.showPassword),r(),a("ngIf",(t.password==null?null:t.password.touched)&&(t.password==null?null:t.password.invalid)),r(3),a("type",t.showConfirmPassword?"text":"password"),r(),D("fas",!0)("fa-eye",!t.showConfirmPassword)("fa-eye-slash",t.showConfirmPassword),r(),a("ngIf",(t.confirmPassword==null?null:t.confirmPassword.touched)&&(t.confirmPassword==null?null:t.confirmPassword.invalid)),r(),a("ngIf",(t.form.errors==null?null:t.form.errors.passwordMismatch)&&t.form.touched),r(),a("ngClass",M(23,ae,t.loading||t.form.invalid)),r(),a("disabled",t.loading||t.form.invalid),r(),a("ngIf",t.loading))},dependencies:[g,k,E,q,L,N,O,T,A,F,c,R],styles:[".register-page-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.bg-image[_ngcontent-%COMP%]{background:url(/assets/bg1.jpg) top/cover no-repeat;position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to right,#000000de,#000000de,#0003);z-index:2}.container[_ngcontent-%COMP%]{position:relative;z-index:3}.register-card[_ngcontent-%COMP%]{background-color:#fffd;max-width:450px;width:100%}.form-control[_ngcontent-%COMP%]{border-radius:.5rem;padding:.75rem;font-size:1rem;transition:border-color .3s,box-shadow .3s}input.form-control[_ngcontent-%COMP%]{height:45px;border-radius:.375rem}input.form-control[_ngcontent-%COMP%]{height:45px}i.fa-eye[_ngcontent-%COMP%], i.fa-eye-slash[_ngcontent-%COMP%]{color:#6c757d}.form-control[_ngcontent-%COMP%]:focus{border-color:#212529;box-shadow:0 0 0 .2rem #21252940}.btn-dark[_ngcontent-%COMP%]{padding:.75rem;font-weight:600;font-size:1rem;transition:background-color .3s}.btn-dark[_ngcontent-%COMP%]:disabled{opacity:.7}.cursor-not-allowed[_ngcontent-%COMP%]{cursor:not-allowed!important;opacity:.7}.text-danger[_ngcontent-%COMP%]{font-size:.875rem}@media (max-width: 768px){.register-card[_ngcontent-%COMP%]{padding:2rem 1rem;border-radius:.75rem}}"]})}}return e})();var $=(()=>{class e{constructor(){this.authService=u(y),this.router=u(C)}canActivate(){return this.authService.getToken()?(this.router.navigate(["/products"]),!1):!0}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var _e=[{path:"login",component:G,canActivate:[$]},{path:"register",component:z}],J=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=_({imports:[c.forChild(_e),c]})}}return e})();var K=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=_({imports:[g,V,B,Z,c,g,V,c]})}}return e})();var rt=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=_({imports:[g,J,K,c,G,z]})}}return e})();export{rt as AuthModule};
